# Google Cloud AI Rescue Coordinator

This project helps coordinate rescue missions using AI agents. It features a simulation engine where AI agents (Survivors) are assigned to missions generated by Google's Gemini models.

## Architecture

- **World Engine**: Generates random crisis scenarios (e.g., "Chemical Spill", "Forest Fire") using Gemini 1.5 Pro.
- **Coordinator**: Assigns the best team of survivors to the crisis based on their skills and status.
- **Mission Sim**: Simulates the mission execution through a chat-based dialogue between agents.
- **Evaluator**: Analyzes the mission log to determine success/failure and award XP.

## Prerequisites

- Python 3.10+
- Google Cloud Project with Vertex AI and Spanner APIs enabled (optional for mock mode).

## Setup

1.  Clone the repository.
2.  Install dependencies:
    ```bash
    pip install -r requirements.txt
    ```
3.  Set up environment variables in `.env` (copy from `app/config.py` defaults if needed):
    ```env
    PROJECT_ID=your-project-id
    REGION=us-central1
    ```

## Running the Application

1.  Start the FastAPI server:
    ```bash
    uvicorn app.main:app --reload --port 8001
    ```

2.  Run the smoke test (verifies the full simulation loop):
    ```bash
    python3 scripts/smoke_test.py
    ```

## API Endpoints

- `POST /simulation/full_loop`: Runs a complete cycle (Generate -> Assign -> Run -> Evaluate).
- `POST /scenario/generate`: Generates a new scenario.
- `POST /mission/assign/{scenario_id}`: Assigns a team to a scenario.
- `POST /mission/run/{mission_id}`: Executes a mission.

## Project Structure

- `app/`: Source code.
    - `simulation/`: Core logic for World Engine, Mission Sim, and Evaluator.
    - `agents/`: Coordinator logic.
    - `models.py`: Pydantic models.
    - `database.py`: In-memory database (mock).
- `scripts/`: Utility scripts.
